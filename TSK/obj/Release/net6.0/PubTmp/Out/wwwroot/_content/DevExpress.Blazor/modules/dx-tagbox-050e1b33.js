import{a as t}from"./_tslib-158249d5.js";import{DxComboBox as e}from"./dx-combobox-10aff0f6.js";import{k as o}from"./key-a83dbe57.js";import{e as n}from"./property-d3853089.js";import{n as s}from"./custom-element-bd7061f2.js";import"./browser-a3d50e79.js";import"./adaptivedropdowncomponents-e35b998f.js";import"./dropdowncomponents-7d867f27.js";import"./popup-79e4f7d5.js";import"./rect-7fc5c2ef.js";import"./point-9c6ab88a.js";import"./rafaction-bba7928b.js";import"./transformhelper-ebad0156.js";import"./layouthelper-4b19d191.js";import"./positiontracker-dba18a16.js";import"./elementobserver-5f004683.js";import"./supportcaptureelement-35919fa4.js";import"./popuproot-d37b16a2.js";import"./branch-ea431ccc.js";import"./lit-element-b0a6fcba.js";import"./data-qa-utils-8be7c726.js";import"./capturemanager-c7d5aef8.js";import"./simpleevent-84045703.js";import"./locker-c40478e6.js";import"./eventhelper-8570b930.js";import"./logicaltreehelper-15991dcb.js";import"./dx-ui-element-de378e9d.js";import"./lit-element-base-af247167.js";import"./nameof-factory-64d95f5b.js";import"./custom-events-helper-18f7786a.js";import"./thumb-b78dcc42.js";import"./query-44b9267f.js";import"./popupbasedialog-0778f080.js";import"./popupportal-447465dc.js";import"./events-interseptor-4336a3f0.js";import"./modalcomponents-a3f03b1d.js";import"./dom-95153cd1.js";import"./dx-dropdown-editor-base-d7fa4169.js";import"./dx-ui-handlers-bridge-4076ae57.js";import"./dx-dropdown-owner-d430fde6.js";import"./dx-listbox-8f043178.js";var r;const i="dxbl-tagbox";let p=r=class extends e{constructor(){super(),this.boundOnInputFocusHandler=this.onInputFocus.bind(this),this.customTagsEnable=!1,this.inputValue=""}connectedCallback(){super.connectedCallback()}disconnectedCallback(){this.inputElement&&this.inputElement.removeEventListener("focus",this.boundOnInputFocusHandler),super.disconnectedCallback()}getFormControlElement(){return this.inputElement?this.inputElement.closest(".input-group.form-control"):null}onInputTextChanged(t){this.inputValue=t.target.value,this.fitInputWidth(),super.onInputTextChanged(t)}onInputFocus(t){var e;null===(e=this.getFormControlElement())||void 0===e||e.classList.add(r.FocusedFormControlCssClass)}invokeKeyDownServerCommand(t){return this.isKeyDownPreventingDefaultNeeded(t)&&t.preventDefault(),super.invokeKeyDownServerCommand(t)}isKeyDownPreventingDefaultNeeded(t){var e;if(t.keyCode!==o.KeyCode.Enter)return!1;const n=null===(e=this.inputElement)||void 0===e?void 0:e.value;return!(!n||0===n.length)}processLostFocus(){var t,e;if(!this.inputElement)return;const o=null===(t=this.inputElement)||void 0===t?void 0:t.value,n=o&&""!==o;this.customTagsEnable&&n&&super.processLostFocus(),document.activeElement!==this.inputElement&&n&&this.setInputValue(""),null===(e=this.getFormControlElement())||void 0===e||e.classList.remove(r.FocusedFormControlCssClass)}fitInputWidth(){if(!this.inputElement)return;const t=this.inputValue.length;this.inputElement.setAttribute("size",0===t?"1":t.toString())}forceInputValue(t,e){this.setInputValue(t),e&&this.highlightInputText()}highlightInputText(){this.inputElement&&this.inputElement.select()}onSlotChanged(t){super.onSlotChanged(t),this.inputElement&&this.inputElement.addEventListener("focus",this.boundOnInputFocusHandler)}getDropDownWidthSourceElement(){return this}requireSendKeyCommandToServer(t){if(super.requireSendKeyCommandToServer(t))return!0;switch(t.keyCode){case o.KeyCode.Esc:return!0;case o.KeyCode.Backspace:return!this.inputElement||0===this.inputElement.value.length}return!1}setInputValue(t){this.inputElement&&(this.inputElement.value=t,this.inputValue=t&&""!==t?t:this.inputElement.placeholder),this.fitInputWidth()}};function u(t,e,o){t.forceInputValue(e,o)}p.FocusedFormControlCssClass="border-primary",t([n({type:Boolean,attribute:"custom-tags-enable"})],p.prototype,"customTagsEnable",void 0),p=r=t([s("dxbl-tagbox")],p);const l={loadModule:function(){},forceInputValue:u};export{l as default,i as dxTagBoxTagName,u as forceInputValue};
